{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nimport PRODUCTS from \"../../data/dummy-data\";\nimport { DELETE_PRODUCT, CREATE_PRODUCT, UPDATE_PRODUCT } from \"../actions/products\";\nimport Product from \"../../models/products\";\nvar initialState = {\n  availableProducts: PRODUCTS,\n  userProducts: PRODUCTS.filter(function (prod) {\n    return prod.ownerId === \"u1\";\n  })\n};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case CREATE_PRODUCT:\n      var newProduct = new Product(new Date().toString(), \"u1\", action.productData.title, action.productData.imageUrl, action.productData.description, action.productData.price);\n      return _objectSpread(_objectSpread({}, state), {}, {\n        availableProducts: state.availableProducts.concat(newProduct),\n        userProducts: state.userProducts.concat(newProduct)\n      });\n\n    case UPDATE_PRODUCT:\n      var productIndex = state.userProducts.findIndex(function (prod) {\n        return prod.id === action.pid;\n      });\n      var updatedProduct = new Product(action.pid, state.userProducts[productIndex].ownerId, action.productData.title, action.productData.imageUrl, action.productData.description, state.userProducts[productIndex].price);\n\n      var updatedUserProducts = _toConsumableArray(state.userProducts);\n\n      updatedUserProducts[productIndex] = updatedProduct;\n      var availableProductIndex = state.availableProducts.findIndex(function (prod) {\n        return prod.id === action.pid;\n      });\n\n      var updatedAvailableProducts = _toConsumableArray(state.availableProducts);\n\n      updatedAvailableProducts[availableProductIndex] = updatedProduct;\n      return _objectSpread(_objectSpread({}, state), {}, {\n        availableProducts: updatedAvailableProducts,\n        userProducts: updatedUserProducts\n      });\n\n    case DELETE_PRODUCT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        userProducts: state.userProducts.filter(function (product) {\n          return product.id !== action.pid;\n        }),\n        availableProducts: state.availableProducts.filter(function (product) {\n          return product.id !== action.pid;\n        })\n      });\n  }\n\n  return state;\n});","map":{"version":3,"sources":["/Users/user/React-Native/sec 10 Http request & Adding web server + database/store/reducers/products.js"],"names":["PRODUCTS","DELETE_PRODUCT","CREATE_PRODUCT","UPDATE_PRODUCT","Product","initialState","availableProducts","userProducts","filter","prod","ownerId","state","action","type","newProduct","Date","toString","productData","title","imageUrl","description","price","concat","productIndex","findIndex","id","pid","updatedProduct","updatedUserProducts","availableProductIndex","updatedAvailableProducts","product"],"mappings":";;;;;;;AAAA,OAAOA,QAAP;AACA,SACEC,cADF,EAEEC,cAFF,EAGEC,cAHF;AAKA,OAAOC,OAAP;AAEA,IAAMC,YAAY,GAAG;AACnBC,EAAAA,iBAAiB,EAAEN,QADA;AAEnBO,EAAAA,YAAY,EAAEP,QAAQ,CAACQ,MAAT,CAAgB,UAACC,IAAD;AAAA,WAAUA,IAAI,CAACC,OAAL,KAAiB,IAA3B;AAAA,GAAhB;AAFK,CAArB;AAKA,gBAAe,YAAkC;AAAA,MAAjCC,KAAiC,uEAAzBN,YAAyB;AAAA,MAAXO,MAAW;;AAC/C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKX,cAAL;AACE,UAAMY,UAAU,GAAG,IAAIV,OAAJ,CACjB,IAAIW,IAAJ,GAAWC,QAAX,EADiB,EAEjB,IAFiB,EAGjBJ,MAAM,CAACK,WAAP,CAAmBC,KAHF,EAIjBN,MAAM,CAACK,WAAP,CAAmBE,QAJF,EAKjBP,MAAM,CAACK,WAAP,CAAmBG,WALF,EAMjBR,MAAM,CAACK,WAAP,CAAmBI,KANF,CAAnB;AAQA,6CACKV,KADL;AAEEL,QAAAA,iBAAiB,EAAEK,KAAK,CAACL,iBAAN,CAAwBgB,MAAxB,CAA+BR,UAA/B,CAFrB;AAGEP,QAAAA,YAAY,EAAEI,KAAK,CAACJ,YAAN,CAAmBe,MAAnB,CAA0BR,UAA1B;AAHhB;;AAKF,SAAKX,cAAL;AACE,UAAMoB,YAAY,GAAGZ,KAAK,CAACJ,YAAN,CAAmBiB,SAAnB,CACnB,UAACf,IAAD;AAAA,eAAUA,IAAI,CAACgB,EAAL,KAAYb,MAAM,CAACc,GAA7B;AAAA,OADmB,CAArB;AAGA,UAAMC,cAAc,GAAG,IAAIvB,OAAJ,CACrBQ,MAAM,CAACc,GADc,EAErBf,KAAK,CAACJ,YAAN,CAAmBgB,YAAnB,EAAiCb,OAFZ,EAGrBE,MAAM,CAACK,WAAP,CAAmBC,KAHE,EAIrBN,MAAM,CAACK,WAAP,CAAmBE,QAJE,EAKrBP,MAAM,CAACK,WAAP,CAAmBG,WALE,EAMrBT,KAAK,CAACJ,YAAN,CAAmBgB,YAAnB,EAAiCF,KANZ,CAAvB;;AAQA,UAAMO,mBAAmB,sBAAOjB,KAAK,CAACJ,YAAb,CAAzB;;AACAqB,MAAAA,mBAAmB,CAACL,YAAD,CAAnB,GAAoCI,cAApC;AACA,UAAME,qBAAqB,GAAGlB,KAAK,CAACL,iBAAN,CAAwBkB,SAAxB,CAC5B,UAACf,IAAD;AAAA,eAAUA,IAAI,CAACgB,EAAL,KAAYb,MAAM,CAACc,GAA7B;AAAA,OAD4B,CAA9B;;AAGA,UAAMI,wBAAwB,sBAAOnB,KAAK,CAACL,iBAAb,CAA9B;;AACAwB,MAAAA,wBAAwB,CAACD,qBAAD,CAAxB,GAAkDF,cAAlD;AACA,6CACKhB,KADL;AAEEL,QAAAA,iBAAiB,EAAEwB,wBAFrB;AAGEvB,QAAAA,YAAY,EAAEqB;AAHhB;;AAKF,SAAK3B,cAAL;AACE,6CACKU,KADL;AAEEJ,QAAAA,YAAY,EAAEI,KAAK,CAACJ,YAAN,CAAmBC,MAAnB,CACZ,UAACuB,OAAD;AAAA,iBAAaA,OAAO,CAACN,EAAR,KAAeb,MAAM,CAACc,GAAnC;AAAA,SADY,CAFhB;AAKEpB,QAAAA,iBAAiB,EAAEK,KAAK,CAACL,iBAAN,CAAwBE,MAAxB,CACjB,UAACuB,OAAD;AAAA,iBAAaA,OAAO,CAACN,EAAR,KAAeb,MAAM,CAACc,GAAnC;AAAA,SADiB;AALrB;AAxCJ;;AAkDA,SAAOf,KAAP;AACD,CApDD","sourcesContent":["import PRODUCTS from \"../../data/dummy-data\";\nimport {\n  DELETE_PRODUCT,\n  CREATE_PRODUCT,\n  UPDATE_PRODUCT,\n} from \"../actions/products\";\nimport Product from \"../../models/products\";\n\nconst initialState = {\n  availableProducts: PRODUCTS,\n  userProducts: PRODUCTS.filter((prod) => prod.ownerId === \"u1\"),\n};\n\nexport default (state = initialState, action) => {\n  switch (action.type) {\n    case CREATE_PRODUCT:\n      const newProduct = new Product(\n        new Date().toString(),\n        \"u1\",\n        action.productData.title,\n        action.productData.imageUrl,\n        action.productData.description,\n        action.productData.price\n      );\n      return {\n        ...state,\n        availableProducts: state.availableProducts.concat(newProduct),\n        userProducts: state.userProducts.concat(newProduct),\n      };\n    case UPDATE_PRODUCT:\n      const productIndex = state.userProducts.findIndex(\n        (prod) => prod.id === action.pid\n      );\n      const updatedProduct = new Product(\n        action.pid,\n        state.userProducts[productIndex].ownerId,\n        action.productData.title,\n        action.productData.imageUrl,\n        action.productData.description,\n        state.userProducts[productIndex].price\n      );\n      const updatedUserProducts = [...state.userProducts];\n      updatedUserProducts[productIndex] = updatedProduct;\n      const availableProductIndex = state.availableProducts.findIndex(\n        (prod) => prod.id === action.pid\n      );\n      const updatedAvailableProducts = [...state.availableProducts];\n      updatedAvailableProducts[availableProductIndex] = updatedProduct;\n      return {\n        ...state,\n        availableProducts: updatedAvailableProducts,\n        userProducts: updatedUserProducts,\n      };\n    case DELETE_PRODUCT:\n      return {\n        ...state,\n        userProducts: state.userProducts.filter(\n          (product) => product.id !== action.pid\n        ),\n        availableProducts: state.availableProducts.filter(\n          (product) => product.id !== action.pid\n        ),\n      };\n  }\n  return state;\n};\n"]},"metadata":{},"sourceType":"module"}